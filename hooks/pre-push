#!/bin/bash
# Pre-push hook to ensure Black formatting compliance
# Install: cp hooks/pre-push .git/hooks/pre-push && chmod +x .git/hooks/pre-push

# Git LFS hook (if LFS is configured)
if command -v git-lfs >/dev/null 2>&1; then
    git lfs pre-push "$@"
fi

# Black formatting check
echo ""
echo "Running Black formatting check..."

# Run Black in check mode
if ! black --check src/ tests/ 2>&1 | grep -q "would reformat"; then
    echo "✅ Black formatting: All files properly formatted"
    exit 0
fi

echo ""
echo "⚠️  Some files need Black formatting!"
echo "Automatically formatting files..."
black src/ tests/
echo ""
echo "✅ Files formatted! Please review, commit, and push again."
exit 1
